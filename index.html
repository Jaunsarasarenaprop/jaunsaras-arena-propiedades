<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jaunsaras Arena Propiedades | El Pato</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
        .bg-custom-green { background-color: #2D5A27; }
        .text-custom-green { color: #2D5A27; }
        .hero-bg {
            background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)),
            url('https://images.unsplash.com/photo-1560518883-ce09059eeffa?auto=format&fit=crop&w=1200');
            background-size: cover;
            background-position: center;
        }
        #modal-detalle {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.95);
            z-index: 1000;
            overflow-y: auto;
            padding: 15px;
        }
    </style>
</head>

<body class="bg-gray-100 text-gray-800">

<nav class="bg-white shadow-md p-3 sticky top-0 z-50 border-b-4 border-custom-green">
    <div class="container mx-auto flex justify-between items-center">
        <a href="/">
            <img src="./logo.jpg" alt="Logo" class="h-16 w-auto object-contain">
        </a>
        <div class="flex flex-col text-right">
            <a href="https://wa.me/5491130687117" class="text-green-700 font-bold text-sm">
                <i class="fab fa-whatsapp"></i> 11 3068-7117
            </a>
            <a href="https://wa.me/5491131049882" class="text-green-700 font-bold text-sm">
                <i class="fab fa-whatsapp"></i> 11 3104-9882
            </a>
        </div>
    </div>
</nav>

<header class="hero-bg text-white py-16 px-4 text-center">
    <h1 class="text-3xl md:text-5xl font-bold mb-4 uppercase tracking-wider">
        Jaunsaras Arena Propiedades
    </h1>
    <p class="text-lg italic mb-8">
        Calle Colectora Autovía 2 N°12271, El Pato
    </p>

    <a href="https://inmuebles.mercadolibre.com.ar/_CustId_186078242" target="_blank"
       class="inline-block bg-yellow-400 text-blue-900 font-extrabold px-8 py-4 rounded-full shadow-2xl">
        VER TODAS EN MERCADO LIBRE
    </a>
</header>

<main class="container mx-auto py-12 px-4">
    <div class="flex justify-between items-end mb-8 border-b-2 border-custom-green pb-2">
        <h2 class="text-2xl font-bold text-gray-700">Inmuebles Destacados</h2>
        <p class="text-sm text-gray-500 italic">Clic en la foto para ver más detalles</p>
    </div>

    <div id="lista-propiedades"
         class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
</main>

<div id="modal-detalle">
    <div class="bg-white max-w-5xl mx-auto rounded-xl overflow-hidden relative mt-4 shadow-2xl">
        <button onclick="cerrarModal()"
                class="absolute top-4 right-4 bg-gray-900 text-white w-10 h-10 rounded-full">
            ✕
        </button>
        <div id="contenido-modal"></div>
    </div>
</div>

<footer class="bg-gray-900 text-white py-12 px-4 border-t-4 border-custom-green">
    <div class="container mx-auto grid grid-cols-1 md:grid-cols-3 gap-10 text-center md:text-left">
        <div>
            <h3 class="text-xl font-bold text-custom-green mb-4">Ubicación</h3>
            <p class="text-gray-400">Calle Colectora Autovía 2 N°12271</p>
            <p class="text-gray-400">C.A. El Pato, Berazategui</p>
        </div>
        <div>
            <h3 class="text-xl font-bold text-custom-green mb-4">Horarios</h3>
            <p class="text-gray-400">Lunes a Viernes</p>
            <p class="text-gray-400">10:00 a 12:30 | 16:30 a 19:00</p>
        </div>
        <div>
            <h3 class="text-xl font-bold text-custom-green mb-4">Contacto</h3>
            <p class="text-gray-400">11 3104-9882</p>
            <p class="text-gray-400">11 3068-7117</p>
        </div>
    </div>
</footer>

<script>
const OWNER = "Jaunsarasarenaprop";
const REPO = "jaunsaras-arena-propiedades";
const BASE = `https://api.github.com/repos/${OWNER}/${REPO}/contents/content/propiedades`;

let propiedadesData = [];

async function cargarPropiedades() {
    const container = document.getElementById("lista-propiedades");
    const res = await fetch(BASE);
    const carpetas = await res.json();
    container.innerHTML = "";

    for (const carpeta of carpetas) {
        if (carpeta.type !== "dir") continue;

        const data = await (await fetch(`${BASE}/${carpeta.name}/data.json`)).json();
        const files = await (await fetch(`${BASE}/${carpeta.name}`)).json();
        const fotos = files.filter(f => f.name.match(/\.(jpg|png|webp)$/i));

        propiedadesData.push({ ...data, fotos });

        container.innerHTML += `
        <div class="bg-white rounded-xl shadow-lg overflow-hidden cursor-pointer"
             onclick="abrirDetalle(${propiedadesData.length - 1})">
            <img src="${fotos[0]?.download_url || ''}"
                 class="w-full h-64 object-cover border-b">
            <div class="p-5">
                <span class="text-xs font-bold text-white bg-custom-green px-2 py-1 rounded uppercase">
                    ${data.category}
                </span>
                <h2 class="text-xl font-bold mt-2">${data.title}</h2>
                <p class="text-custom-green text-2xl font-black mt-1">${data.price}</p>
                <p class="text-blue-600 font-bold mt-4 text-xs underline italic">
                    Ver fotos y descripción →
                </p>
            </div>
        </div>`;
    }
}

function abrirDetalle(index) {
    const p = propiedadesData[index];
    const modal = document.getElementById("modal-detalle");
    const contenido = document.getElementById("contenido-modal");

    contenido.innerHTML = `
    <div class="p-6 md:p-10 grid grid-cols-1 lg:grid-cols-2 gap-10">
        <div>
            <h2 class="text-3xl font-bold mb-2">${p.title}</h2>
            <p class="text-custom-green text-3xl font-black mb-6">${p.price}</p>
            <p class="mb-6">${p.description}</p>
        </div>
        <div class="grid grid-cols-1 gap-4">
            ${p.fotos.map(f => `<img src="${f.download_url}" class="rounded shadow">`).join("")}
        </div>
    </div>`;

    modal.style.display = "block";
    document.body.style.overflow = "hidden";
}

function cerrarModal() {
    document.getElementById("modal-detalle").style.display = "none";
    document.body.style.overflow = "auto";
}

cargarPropiedades();
</script>

</body>
</html>
